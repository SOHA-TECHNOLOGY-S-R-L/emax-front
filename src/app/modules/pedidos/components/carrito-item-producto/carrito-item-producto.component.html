<h5>Carrito</h5>
@if(!isAuthenticated() ) {
<div class="row alert alert-danger">
  <div class="col-12 d-inline-flex">
    <div>Para realizar pedido</div>&nbsp;&nbsp;
    <div><b><a [routerLink]="['/login/']" (click)="closeModal()"> Iniciar sesi√≥n</a></b></div>
  </div>
</div>
}
@for (item of lstItemPedido; track $index) {
<div style="border-bottom: 1px solid #ccc; padding-top: 2px;">
  <div class="d-flex justify-content-between align-items-center">
    <img [src]="API_URL_VER_IMAGEN+item.imagen" alt={{item.imagen}} width="48px" />
    <p class="my-0">{{item.producto.nombre | stringToTitleWithAccents}}</p>
    <button id="btnDeleteFromCart" class="btn btn-danger icon-square" title="Eliminar item" (click)="eliminarItemPedido(item)">
      <i class="fa-regular fa-trash-can"></i>
    </button>
  </div>
  <div class="row">
    <div class="col-3 d-flex align-items-center">
      {{item.producto.precioNetoNumberShow | currency: 'PEN'}}
    </div>
    <div class="col-5 d-flex align-items-center">
      <input type="number" name="cantidad" class="form-control" [step]="item.producto.gruposDe"
        [min]="item.producto.minCantidadPedido" [max]="item.producto.maxCantidadPedido" [value]="item.cantidad"
        (input)="actualizarCantidad(item.producto.id, $event);calcularTotal() " />
    </div>
    <div class="col-4 d-flex align-items-center">
      {{item.importe| currency:'PEN'}}
    </div>
  </div>
</div>
}

<div class="row">
  <div class="col-6">
    <p class="text-end fw-bold">TOTAL</p>
  </div>
  <div class="col-6">
    <p class="text-center fw-bold">{{total | currency:'PEN'}}</p>
  </div>
</div>

<div class="row">
  <div class="col-12 d-flex justify-content-center">
    @if(lstItemPedido.length > 0 && authService.hasRole('ROLE_CREATE_VENTA') &&
    authService.isAuthenticated()){
    <button (click)="irRealizarPedido(); closeModal();" class="btn btn-primary">Realizar el pedido</button>
    } @else {
    <button (click)="irRealizarPedido(); closeModal()" class="btn btn-primary" disabled>Realizar el pedido</button>
    }
  </div>
</div>
